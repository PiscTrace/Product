# PiscTrace

**PiscTrace** 是一款功能强大的机器视觉桌面应用，结合了 OpenCV 与 YOLO 技术进行图像数据分析，并通过 MiDaS 实现单目深度估计增强。  
该系统具备高性能、可扩展性强的特点，适用于实时监控、目标检测、智能交通等计算机视觉任务。

OpenCV 提供强大的图像预处理与后处理功能，YOLO（You Only Look Once）实现高效目标识别与定位，MiDaS 增强图像深度感知能力，三者协同构建了一个高精度、可定制的视觉处理平台。


## 核心功能

### 输入支持
- 支持多种输入源：
  - 静态图片（JPG / PNG 等）
  - 摄像头实时流
  - 网络视频流（RTSP / HTTP 等）
- 适用于实时监控、自动驾驶等应用场景

### 渲染与结果导出
- 支持输出图像.png与视频文件.mp4
- 检测结果可导出为 CSV 文件，便于进一步分析与对接


## 图像处理与分析

### OpenCV 预处理功能

| 模块           | 功能项                     | 描述说明                                   |
|----------------|----------------------------|--------------------------------------------|
| 图像预处理     | 视图裁剪                   | 裁剪图像视野，仅保留目标区域               |
|                | 滤镜平衡                   | 自动或手动调整图像色调/对比                |
|                | 曲线调整                   | 类似 Photoshop 的曲线增强对比和亮度        |
|                | 视图矫正                   | 修正因拍摄角度或设备倾斜产生的畸变         |
| 基础调整       | 亮度 / 曝光度              | 提升或降低图像亮度                         |
|                | 灰度化 / 阈值化            | 灰度转换与二值化，适用于边缘检测等         |
|                | 色相调整                   | 调整图像整体色彩                           |
| 开发者模式     | 编程接口                   | 提供像素矩阵访问接口，可脚本操作图像       |
|                | 工具类支持                 | 封装常用处理逻辑，便于调用与自动执行       |


### MiDaS 深度估计功能

| 功能项         | 描述说明                                     |
|----------------|----------------------------------------------|
| 单目深度图生成 | 利用单张图像生成景深图，估算物体远近关系     |
| 深度掩码遮罩   | 提供深度相关掩码，便于聚焦、分割、滤波操作   |


### YOLO 目标检测功能

| 类别         | 项目                           | 描述说明                                         |
|--------------|----------------------------------|--------------------------------------------------|
| 支持版本     | v8 / v9 / v10 / v11 / v12       | 不支持无检测框数据的分类模型                             |
| 检测类型     | 对象检测（Object Detection）    | 检测图像中多个目标位置与类别                     |
|              | 姿态检测（Pose Estimation）     | 骨骼点位识别                                     |
|              | 实例分割（Mask Segmentation）   | 为每个目标提供像素级分割掩码                     |
|              | 可旋转框（Oriented BBox）       | 支持任意角度的目标框                             |
| 增强功能     | 轨迹跟踪（Tracking）            | 实时跟踪物体移动轨迹                             |
|              | 置信度 / 交叉阈值控制          | 精细控制目标筛选精度                             |
|              | 围栏统计                        | 判断目标是否进入指定区域                         |
|              | 热力图监控                      | 可视化目标活跃区域                               |
|              | 姿态轨迹                        | 跟踪人物或物体动作路径                           |
|              | 背景虚化                        | 自动识别前景后虚化背景                           |
|              | 视线检测                        | 分析人物目光方向                                 |
|              | 自定义检测                      | 支持导入自定义模型与检测逻辑                     |


## 技术特性一览

| 特性名称        | 描述                                                             |
|-----------------|------------------------------------------------------------------|
| **CUDA 加速**    | 支持 GPU 加速，提升深度估计与检测效率                            |
| **插件系统**     | 支持 Python 插件扩展，便于集成自定义算法                          |
| **插件接口**     | 提供像素级矩阵访问，支持 ROI 区域处理和高级图像操作              |



## 版本功能对比

| 版本   | 本地图片 | 本地视频 | 网络视频 | OpenCV | YOLO | MiDaS | 保存处理 | 摄像头支持 | 开发接口 | 密钥系统 | 定价   |
|:------:|:--------:|:--------:|:--------:|:------:|:----:|:-----:|:--------:|:----------:|:--------:|:--------:|:------:|
| Note   | ✅        | ✅        | ✅        | ✅      | ✅    | ✅     | ❌        | ❌          | ❌        | ✅        | ¥6     |
| Plus   | ✅        | ✅        | ✅        | ✅      | ✅    | ✅     | ✅        | ❌          | ❌        | ✅        | ¥38    |
| Pro    | ✅        | ✅        | ✅        | ✅      | ✅    | ✅     | ✅        | ✅          | ❌        | ✅        | ¥88    |
| Ultra  | ✅        | ✅        | ✅        | ✅      | ✅    | ✅     | ✅        | ✅          | ✅        | ✅        | ¥128   |

### 购买与升级说明

- 所有版本均启用密钥绑定机制（**每台主机独立授权**）
- 表格中价格为**首次购买价**
- **每次升级需支付 ¥6 手续费**
- **升级价格计算公式：** `目标版本售价 - 当前版本售价 + ¥6`

> 例如：Plus 升级到 Ultra：
> - `¥128 - ¥38 + ¥6 = ¥96`



   
# PiscCode
基于 PiscTrace 架构的视图处理的开发者版本，支持静态图片、实时视频流、摄像头视频流和网络视频流的处理。与 PiscTrace 应用版相比，开发者版通过直接的代码开发，提供了更高的灵活性和可定制性，适用于需要深度定制和复杂处理的应用场景。
## 核心功能
### 输入支持
- 支持静态图片（JPG/PNG等）、摄像头视频流、网络视频流（RTSP/HTTP等）
- 适用于实时监控、自动驾驶等场景

### 渲染与保存
- 输出格式：图像.png、视频.mp4

## 版本功能对比

| 版本  | 本地图片 | 本地视频 | 网络视频 | 保存处理 | 摄像头 | 密钥 | 定价 |
|:-----:|:--------:|:--------:|:--------:|:--------:|:------:|:----:|:----:|
| Note  | ✅        | ✅        | ✅        | ❌        | ❌      | ✅    | ¥6    |
| Plus  | ✅        | ✅        | ✅        | ✅        | ❌      | ✅    | ¥56   |
| Pro   | ✅        | ✅        | ✅        | ✅        | ✅      | ✅    | ¥96   |

### 购买与升级说明

- 所有版本均启用密钥绑定机制（**每台主机独立授权**）
- 表格中价格为**首次购买价**
- **每次升级需支付 ¥6 手续费**
- **升级价格计算公式：** `目标版本售价 - 当前版本售价 + ¥6`

> 例如：Plus 升级到 Pro：
> - `¥96 - ¥56 + ¥6 = ¥46`

# ❓ 常见问题（FAQ）

## CUDA环境

| 问题                         | 解答                                                                 |
|------------------------------|----------------------------------------------------------------------|
| 如何使用 CUDA 加速？         | - 需具备 **NVIDIA CUDA 核心显卡**<br>- 安装对应版本的 **CUDA 驱动** 与 **PyTorch 库** |


## 模型加载

| 问题                        | 解答                                                                 |
|-----------------------------|----------------------------------------------------------------------|
| 如何导入 YOLO 模型？        | 将 `.pt` 格式的 YOLO 模型放入目录： `解压地址/Support Files/data/model` |
| 为什么没有 MiDaS 选项？     | - MiDaS 使用 **GitHub 在线资源与配置**<br>- 请确保网络可访问 GitHub<br>- **首次加载时间较长**，包括模型与配置 |
| 自己微调的 YOLO 模型如何使用？ | - 模型放入模型文件夹<br>- 可替换 `解压地址/_internal/ultralytics` 等相关库文件<br>- 注意保持模型输入输出接口一致，勿改动数据流逻辑 |


## 文件导入与管理

| 问题                     | 解答                                                                 |
|--------------------------|----------------------------------------------------------------------|
| 如何导入文件？            | - 将文件放入：`项目地址/input`<br>- 或直接将文件/文件夹拖入文件栏 |
| 如何切换摄像头或文件？    | - 通过 `文件 > 切换数据源` 进行切换<br>- 支持多个摄像头接入，建议根据硬件资源合理配置 |

## 参数设置与视频导出

| 问题                          | 解答                                                                 |
|-------------------------------|----------------------------------------------------------------------|
| 无法调整参数或设置无效？      | 单击参数标题以激活该参数，再次点击可取消                            |
| 如何导出视频？                | - 在画面上 **右键点击**<br>- 可选择“保存当前帧”或“导出完整视频”       |


## 摄像头与保存

| 问题                              | 解答                                                                 |
|-----------------------------------|----------------------------------------------------------------------|
| 摄像头不支持渲染保存？            | - 实时预览模式不支持录制处理结果<br>- 支持多开预览 + 原始视频录制，保存路径为 `项目地址/input` |

## 库文件缺失处理

| 问题                             | 解答                                                                  |
|----------------------------------|-----------------------------------------------------------------------|
| 自定义运行时报错“库文件缺失”？   | 请将所需库文件放入目录：`解压地址/_internal`                         |


# 使用须知

## 运行环境与最低配置要求

| 项目           | 最低配置说明                                             |
|----------------|----------------------------------------------------------|
| 操作系统       | Windows 11                                               |
| 处理器         | Intel Core i7-8550U 或同等性能处理器                     |
| 显卡           | NVIDIA MX150（2GB 显存）或集成显卡（计算速度受限，支持运行）|
| 内存           | 8 GB RAM                                                 |
| 存储空间       | 软件包解压后约 5.3 GB                                    |
| 模型资源       | 需根据需求手动导入（如 YOLO、MiDaS 等）                  |



## 软件类商品销售及退货政策声明

### 一、法律依据声明
根据《中华人民共和国消费者权益保护法》第二十五条、《最高人民法院关于审理网络消费纠纷案件适用法律若干问题的规定（一）》第三条，对软件类商品作如下特别约定：

> **法定排除条款**  
> “在线下载的数字产品（含软件授权码、激活码、程序包等）**不适用七日无理由退货**，消费者已确认知悉该特殊性。”（《消法》第二十五条第三项）

### 二、退货条件限制
#### 支持退货的情形（需提供有效证据）：
1. **无法正常使用**  
   - 软件激活后出现技术故障导致无法运行（需提交故障录屏及系统日志）
   - 功能与商品描述存在**实质性差异**（需对比宣传页与实测记录）
   - 本产品下载后方能申请 **密钥** ，发出 **申请** 即视为可以正常使用
2. **未激活可退**  
   - 未申请密钥，或已申请但商家**未发送**密钥支持无理由退款（需在7日内申请）
   - 本产品下载申请后方能申请 **密钥** ，发出 **密钥** 即视为产品已经激活

### 不支持退货情形详细条款说明

| 类型                | 详细条款内容                                                                                                                               | 法律依据及补充说明                                                                                                                                                                                                                                   |
|---------------------|--------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **激活后主观理由退货** | 1. **适用商品范围**：手机、电脑、数码产品等一经激活或试用后价值显著贬损的商品<br>2. **免责条件**：需在销售页面**显著位置**提示"激活后不支持无理由退货"，并在支付前设置强制确认程序<br>3. **举证责任**：商家需证明已履行提示义务（如弹窗确认、加粗字体等） | • 《消法》第二十五条：数字化商品或拆封后价值贬损商品不适用无理由退货<br>• 《网络购买商品七日无理由退货暂行办法》第七条：激活后价值贬损商品经消费者确认可不适用退货                                                                                      |
| **因设备不兼容退货**  | 1. **免责前提**：商家已明确标注商品的系统要求（如操作系统版本、硬件配置）<br>2. **消费者义务**：购买前需自行核验设备兼容性<br>3. **技术支持**：商家仅需提供技术指导，无退货责任（如驱动安装、设置调整）                   | • 《网络交易管理办法》第十条：经营者应真实披露商品信息，消费者需自行承担选购责任<br>• 《消法》第二十条：商家对商品性能的说明无虚假宣传即免责                                                                                                              |
| **购买后降价要求补偿** | 1. **定价自主权**：除保价承诺外，经营者可随时调整价格，市场波动不构成退货理由<br>2. **赠品扣除限制**：差价计算时不得强制扣除赠品价值（除非消费者选择保留赠品）<br>3. **格式条款无效**：单方规定"降价不补差"的条款未显著提示的无效 | • 《民法典》第五百八十三条：合同履行后价格变动不可主张补偿（情势变更原则）<br>• 司法判例：强制扣除赠品价值的保价条款属无效格式条款（广州互联网法院案例）                                                                                        |


## 下载链接:
 - **PiscTrace** : [下载地址](https://gitcode.com/weixin_43607107/PiscTrace/releases/download/PiscTrace/PiscTrace-影迹.zip)
 - **PiscCode** : [下载地址](https://gitcode.com/weixin_43607107/PiscTrace/releases/download/PiscCode/PiscCode-影迹.zip)
